<template>
	<view class="container">
		<view class="video-navbar reset-nvue"
			:style="`width:${boxStyle.width};padding-top:${40 + (topBarHeight * 2)}rpx`">
			<view class="" style="position: relative;">
				<image class="viode-top-icon" src="@/static/video/video-back.png" mode="heightFix"
					@click="handleBack()"></image>
			</view>
		</view>
		<swiper :style="'width: '+ windowWidth +'px; height: '+ windowHeight +'px; background-color: #000000;'"
			:vertical="true" @animationfinish="animationfinish" @change="change" :current="current"
			:indicator-dots="false">
			<swiper-item v-for="(item,index) in dataList">
				<view v-if="Math.abs(k-index)<=1">
					<view>
						<!-- 
						1.v-ifï¼šç”¨äºæ§åˆ¶è§†é¢‘åœ¨èŠ‚ç‚¹çš„æ¸²æŸ“æ•°
						2.mutedçš„é»˜è®¤å€¼æ˜¯ falseï¼Œä»£è¡¨é»˜è®¤æ˜¯ç¦éŸ³è§†é¢‘çš„
						3.http-cacheé»˜è®¤å¼€å¯è§†é¢‘ç¼“å­˜
						4.posterï¼ˆå°é¢ï¼ˆæ–¹æ¡ˆä¸€ï¼‰ï¼‰ï¼šè¿™é‡Œçš„å°é¢é»˜è®¤å¤„ç†å­˜å‚¨åœ¨é˜¿é‡Œäº‘çš„è§†é¢‘
						5.show-loadingï¼šè¿™é‡Œé»˜è®¤å»æ‰æ’­æ”¾è½¬åœˆçš„æ ‡å¿—
						v-if="Math.abs(k-index)<=1"
						 -->
						<video :ref="'item'+index" :id="item._id+''+index" :loop="true" :muted="item.isplay" :controls="false"
							:http-cache="true" :page-gesture="false" :show-fullscreen-btn="false" :show-loading="false"
							:show-center-play-btn="false" :enable-progress-gesture="false"
							:src="item.video_image_format" @ended="ended" @click="tapVideoHover(item.state,$event)"
							:style="'width: '+ windowWidth +'px; height: '+ windowHeight +'px; background-color: #000000; z-index: -1;'"
							:poster="item.video_image_format+'?x-oss-process=video/snapshot,t_100,f_jpg'"></video>
						<!-- 
						1.è¿™é‡Œæ˜¯å°é¢ï¼ˆæ–¹æ¡ˆäºŒï¼‰ï¼šè¿™é‡Œçš„å°é¢å¯ä»¥è‡ªå®šä¹‰ã€‚
						2.ä¹Ÿåœ¨ä»£ç ä¸­åšäº†æ‰¹æ³¨ï¼Œä¸¤ç§æ–¹æ¡ˆå¯ä»¥å…±å­˜ï¼Œä¸ä¼šç›¸äº’å½±å“ã€‚
						-->
						<image v-if="!item.playIng"
							:src="item.video_image_format+'?x-oss-process=video/snapshot,t_100,f_jpg'"
							:style="'width: '+ windowWidth +'px; height: '+ windowHeight +'px; position: absolute;'"
							mode="aspectFit"></image>
					</view>
					<!-- æ’­æ”¾çŠ¶æ€ï¼špause çš„æ—¶å€™å°±ä¼šæš‚åœ -->
					<view class="videoHover" @click="tapVideoHover(item.state,$event)" :style="'width: '+ windowWidth +'px; height: '+ windowHeight +'px;'">
						<image v-if="item.state=='pause'" class="playState" src="@/static/img/index/play.png"></image>
					</view>
					<view class="userInfo">
						<!-- 1.å¤´åƒ -->
						<!-- <view class="user-avatar-body">
							<image v-if="item.isShowProgressBarTime == false && item.user"
								@click="handleAhtuorInfo(item.user_id)" class="userAvatar"
								:src="item.user.avatar_format" mode="aspectFill"></image>
							<text class="add-user-icon" @click="handleAddUser(item)" v-if="!item.is_follow">+</text>
						</view> -->
						<<!-- image @click="tozuozhe" class="userAvatar" :src="list.href" mode="aspectFill">
							</image> -->
							<!-- 2.ç‚¹èµ -->
							<!-- <view v-if="item.isShowProgressBarTime == false" @click="cLike(item);"
								style="opacity: 0.9; margin-top: 17px;">
								<image v-if="item.is_like" src="@/static/video/xin.png"
									style="width: 30px; height: 30px; position: absolute; right: 10px;"></image>
								<image v-if="!item.is_like" src="@/static/video/xin-2.png"
									style="width: 30px; height: 30px; position: absolute; right: 10px;"></image>
								<text
									style="color: #FFFFFF; font-size: 14px; text-align: center; margin-top: 30px; font-weight: bold;"
									:class="{'likeNumActive':item.is_like}">{{item.like}}</text>
							</view> -->
							<!-- 3.è¯„è®º -->
							<!-- <view v-if="item.isShowProgressBarTime == false" class="comment" @click="toComment(index)"
								style="opacity: 0.9; margin-top: 17px;">
								<image src="@/static/img/index/comment-icon.png"
									style="width: 25px; height: 25px; position: absolute; right: 12px;"></image>
								<text
									style="color: #FFFFFF; font-size: 14px; font-weight: bold; text-align: center; margin-top: 30px;">{{item.comment}}</text>
							</view> -->
							<!-- æ”¶è— -->
							<!-- <view v-if="item.isShowProgressBarTime == false" class="comment"
								@click="handleFavorite(item)" style="opacity: 0.9; margin-top: 17px;">
								<image v-if="!item.is_favorite" src="/static/video/collect-video-icon.png"
									style="width: 25px; height: 25px; position: absolute; right: 12px;"></image>
								<image v-else src="/static/video/collect-video-icon-active.png"
									style="width: 25px; height: 25px; position: absolute; right: 12px;"></image>
								<text
									style="color: #FFFFFF; font-size: 14px; font-weight: bold; text-align: center; margin-top: 30px;">{{item.favorite}}</text>
							</view> -->
							<!-- 4.åˆ†äº« -->
							<!-- <view v-if="item.isShowProgressBarTime == false" @click="handleSharePopup(item)"
								style="opacity: 0.9; margin-top: 17px;">
								<image src="@/static/img/index/share-fill.png"
									style="width: 30px; height: 30px; position: absolute; right: 10px;"></image>
								<text
									style="color: #FFFFFF; font-size: 14px; text-align: center; font-weight: bold; margin-top: 30px;">{{item.transmit}}</text>
							</view> -->
					</view>
					<!-- æœ€åº•ä¸‹çš„æ–‡å­—éƒ¨åˆ† -->
					<view class="content" v-if="dataList.length !== 0 && dataList[k].isShowProgressBarTime == false">
						<text class="userName" :style="'width: '+ (windowWidth - 90) +'px;'"
							v-if="item.user">{{item.user.nickname}}</text><!-- i={{i}} -->
						<text class="words" :style="'width: '+ (windowWidth - 90) +'px;'">{{item.video_title}}</text>
						<!-- k={{k}} -->
					</view>
				</view>
			</swiper-item>
		</swiper>
		<uni-popup type="bottom" ref="pinglun" @touchmove.stop.prevent="moveHandle">
			<!-- <view
				:style="'width: '+ windowWidth +'px; height: '+ (boxStyle.height/heightNum) +'px; background-color: #242424; border-top-left-radius: 10px; border-top-right-radius: 10px;'">
				<douyin-scrollview :Width="windowWidth" :Height="(boxStyle.height/1.23)" :deleteIOSHeight="36"
					:deleteAndroidHeight="15" :isNotIndex="false" @closeScrollview="closeScrollview">
				</douyin-scrollview>
			</view> -->
		</uni-popup>
	</view>
</template>
<script>
	// import userList from './data.js'//è¿™ä¸ªæ˜¯å‡æ•°æ®
	import douyinScrollview from '@/components/douyin-scrollview/douyin-scrollview.nvue'
	import config from '@/utils/config.js';
	import * as api from '@/utils/api.js';
	export default {
		components: {
			douyinScrollview,
		},
		data() {
			return {
				current: 0,
				listQuery: {},
				location: {},
				isShareVideo: false, //åˆ¤æ–­æ˜¯å¦ä»åˆ†äº«è¿›å…¥æŸ¥çœ‹è§†é¢‘è¯¦æƒ…
				topBarHeight: 0, //é¡¶éƒ¨çŠ¶æ€æ é«˜åº¦
				windowWidth: 0,
				windowHeight: 0,
				platform: "",
				deleteHeight: 0,
				dataList: [],
				k: 0,
				oldVideo: "",
				voice: "",
				timeout: "",
				thisindex: 0,
				isChange: true,
				boxStyle: { //è§†é¢‘ï¼Œå›¾ç‰‡å°é¢æ ·å¼ğŸŒŸğŸ’—
					'height': 0,
					'width': 0,
				},
				startVideoLeft: 0,
				startVidoeTop: 0,
				videoLeft: 0,
				videoTop: 0,
				scrollable: true,
			}
		},
		watch: {
			k(k, old_k) { //ç›‘å¬ k å€¼çš„å˜åŒ–ï¼Œå¯ä»¥æ§åˆ¶è§†é¢‘çš„æ’­æ”¾ä¸æš‚åœ
				console.log(k)
				this.dataList[old_k].playIng = false //å¦‚æœè§†é¢‘æš‚åœï¼Œå°±åŠ è½½å°é¢
				this.dataList[old_k].isplay = true
				this.dataList[old_k].state = 'pause'
				// uni.createVideoContext(this.dataList[old_k]._id+''+old_k,this).seek(0)
				// uni.createVideoContext(this.dataList[old_k]._id+''+old_k,this).pause()
				console.log('é¢„ç•™ç¬¬' + (old_k + 1) + 'ä¸ªè§†é¢‘ï¼š' + this.dataList[old_k]._id + '' + old_k)
				// 2.0ç‰ˆæœ¬å·²ç»å»æ‰äº†ä¸‹é¢è¿™ä¸€å¥ï¼Œè§†é¢‘ä¸ç”¨æš‚åœï¼Œåªéœ€è¦æŠŠå£°éŸ³ç¦æ­¢å°±è¡Œ
				uni.createVideoContext(this.dataList[old_k]._id + '' + old_k, this)
					.stop() //å¦‚æœè§†é¢‘æš‚åœï¼Œé‚£ä¹ˆæ—§è§†é¢‘åœæ­¢ï¼Œè¿™é‡Œçš„this.dataList[old_k]._id + '' + old_kï¼Œåé¢åŠ  old_k æ˜¯ä¸ºäº†æ¯ä¸€ä¸ªè§†é¢‘çš„ id å€¼ä¸åŒï¼Œè¿™æ ·å°±å¯ä»¥å¤§ç¨‹åº¦çš„é¿å…ä¸²éŸ³é—®é¢˜
				console.log('å·²ç»æš‚åœ --> ç¬¬' + (old_k + 1) + 'ä¸ªè§†é¢‘ï½') //æç¤º
				this.dataList[k].state = 'play'
				setTimeout(() => {
					uni.createVideoContext(this.dataList[k]._id + '' + k, this).play()
					setTimeout(() => {
						this.dataList[k].isplay = false
						this.dataList[k].playIng = true
					}, 50)
				}, 250)
				var p = k + 1;
				setTimeout(() => {
					// this.handleAddViews(this.videoNewList[p]._id);
				}, 20)
				console.log('é¢„åŠ è½½ç¬¬' + (p + 1) + 'ä¸ªè§†é¢‘ï¼š' + this.dataList[p] + '' + p)
			}
		},
		onShow() {
			console.log('å›åˆ°å‰å°');
			if (this.dataList.length !== 0) {
				this.dataList[this.k].state = 'play';
				uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).play()
			}
		},
		onHide() {
			if (this.dataList.length !== 0) {
				this.dataList[this.k].state = 'pause'; //ç•Œé¢éšè—ä¹Ÿè¦åœæ­¢æ’­æ”¾è§†é¢‘
				uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).pause(); //æš‚åœä»¥åç»§ç»­æ’­æ”¾
				console.log('åˆ°åå°');
			}
			this.isChange = true;
		},
		onLoad(option) {
			console.log(option)
			if (option.listQuery) {
				this.listQuery = JSON.parse(option.listQuery);
				console.log('uuuuu', option)
			}
			// å¦‚æœä»åˆ†äº«è¿›å…¥ï¼Œåªèƒ½çœ‹ä¸€æ¡è§†é¢‘
			if (option.isShareVideo) {
				this.isShareVideo = option.isShareVideo == 'true';
			}
			let location = uni.getStorageSync('location');
			if (location) {
				this.location = location;
			}
			this.platform = uni.getSystemInfoSync().platform
			var model = uni.getSystemInfoSync().model
			if (this.platform == 'ios' && (model !== 'iPhone6' || model !== 'iPhone6s' || model !== 'iPhone7' ||
					model !== 'iPhone8')) {
				// this.deleteHeight = 32//æœ‰ tabbarçš„ ä¿®æ”¹è¿™é‡Œå¯ä»¥æ”¹å˜è§†é¢‘é«˜åº¦
			}
			this.windowWidth = uni.getSystemInfoSync().screenWidth //è·å–å±å¹•å®½åº¦
			this.windowHeight = uni.getSystemInfoSync().windowHeight
			this.boxStyle.width = this.windowWidth + 'px' //ç»™å®½åº¦åŠ px
			// this.wHeight = uni.getSystemInfoSync().screenHeight; //è·å–å±å¹•é«˜åº¦
			// this.boxStyle.height = this.wHeight - this.deleteHeight; //æ”¹å˜è§†é¢‘é«˜åº¦
			this.boxStyle.height = this.windowHeight - this.deleteHeight; //æœ‰ tabbarçš„ ä¿®æ”¹è¿™é‡Œå¯ä»¥æ”¹å˜è§†é¢‘é«˜åº¦
			// console.log(option)
			this.thisindex = Number(option.index)
			this.get(option) //è¿™ä¸€æ­¥ï¼ŒåŠ è½½è§†é¢‘æ•°æ®
		},
		onReady() {},
		methods: {
			change(event) {
				this.k = event.detail.current
			},
			animationfinish(event) {
				// 1.è¿™é‡Œè¿›è¡Œåˆ¤æ–­ï¼Œå¦‚æœæ˜¯æœ€åä¸€ä¸ªè§†é¢‘å°±è¿›å…¥ get() æ–¹æ³•åŠ è½½è§†é¢‘è¿›å…¥åˆ—è¡¨
				if (this.k == this.dataList.length - 1) {
					// this.GET()
				}
			},
			autoPlay() {
				this.isAutoplay = !this.isAutoplay;
				if (!this.isAutoplay) {
					this.autoplayText = "å¼€å¯è‡ªåŠ¨æ’­æ”¾"
					uni.showToast({
						title: "å…³é—­è‡ªåŠ¨æ’­æ”¾",
						icon: 'none',
						duration: 3000
					})
				} else {
					this.autoplayText = "å…³é—­è‡ªåŠ¨æ’­æ”¾"
					uni.showToast({
						title: "å¼€å¯è‡ªåŠ¨æ’­æ”¾",
						icon: 'none',
						duration: 3000
					})
				}
			},
			async getData() {
				// å¦‚æœä»åˆ†äº«è¿›å…¥ï¼Œåªèƒ½çœ‹ä¸€æ¡è§†é¢‘
				if (this.isShareVideo) return;
				console.log('9999åŠ è½½äº†', this.isShareVideo);
				// è¿™é‡Œå°±æ˜¯æ•°æ®åŠ è½½å®Œä»¥åå†å‘åç«¯å‘é€æ•°æ®çš„åœ°æ–¹
				// uni.request({
				// 	url: 'https://bdb24c6d-8c19-4f80-8e7e-c9c9f037f131.bspapp.com/video',
				// 	method: 'POST',
				// 	data:{
				// 		info: 'get_video'
				// 	},
				// 	success: (res) => {
				// 		var msg = res.data.data
				// 		for (let i = 0; i < msg.length; i++) {
				// 			this.dataList.push(msg[i])
				// 		}
				// 	}
				// })
				let data = {
					...this.listQuery,
					lng: this.location.lng,
					lat: this.location.lat,
				};
				const res = await api.videoList(data);
				if (res.code == 1) {
					if (res.data.data.length > 0) {
						let videoList = res.data.data;
						videoList.map((item, index) => {
							this.$set(item, 'isplay', true); //æ˜¯å¦æ’­æ”¾éŸ³é¢‘
							this.$set(item, 'isShowProgressBarTime', false); //æ˜¯å¦æ˜¾ç¤ºè¿›åº¦æ¡ï¼ˆé»˜è®¤è¿™ä¸ªå³å¯ï¼‰
							this.$set(item, 'state', 'pause'); //åˆå§‹çŠ¶æ€æ ‡å¿—ï¼ˆä¸æ”¹ï¼‰
							this.$set(item, 'isShowimage', false); //æ˜¯å¦æ˜¾ç¤ºå°é¢ï¼ˆé»˜è®¤è¿™ä¸ªå³å¯ï¼‰
							this.$set(item, 'playIng', false); //æ’­æ”¾ï¼ˆé»˜è®¤è¿™ä¸ªå³å¯ï¼‰
						})
						this.dataList = this.dataList.concat(videoList);
					}
				}
			},
			touchstart(event) {
				this.dataList[this.k].isShowimage = true //åˆšè§¦æ‘¸çš„æ—¶å€™å°±è¦æ˜¾ç¤ºé¢„è§ˆè§†é¢‘å›¾ç‰‡äº†
				this.dataList[this.k].isShowProgressBarTime = true //æ˜¾ç¤ºæ—¶é—´çº¿
				this.ProgressBarOpacity = 1 //è®©æ»‘å—æ˜¾ç¤ºèµ·æ¥æ›´æ˜æ˜¾ä¸€ç‚¹
				this.dotWidth = 10 //è®©ç‚¹æ˜¾ç¤ºèµ·æ¥æ›´æ˜æ˜¾ä¸€ç‚¹
			},
			touchend() { //å½“æ‰‹æ¾å¼€åï¼Œè·³åˆ°æœ€æ–°æ—¶é—´
				uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).seek(this.newTime)
				if (this.dataList[this.k].state == 'pause') {
					this.dataList[this.k].state = 'play'
					uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).play()
				}
				this.dataList[this.k].isShowProgressBarTime = false //è§¦æ‘¸ç»“æŸåï¼Œéšè—æ—¶é—´çº¿
				this.dataList[this.k].isShowimage = false //è§¦æ‘¸ç»“æŸåï¼Œéšè—æ—¶é—´é¢„è§ˆ
				this.ProgressBarOpacity = 0.5 //éšè—èµ·æ¥è¿›åº¦æ¡ï¼Œä¸é‚£ä¹ˆæ˜æ˜¾äº†
				this.dotWidth = 0 //éšè—èµ·æ¥è¿›åº¦æ¡ï¼Œä¸é‚£ä¹ˆæ˜æ˜¾äº†
			},
			touchmove(event) { //å½“æ‰‹ç§»åŠ¨æ»‘å—æ—¶ï¼Œè®¡ç®—ä½ç½®ã€ç™¾åˆ†å°æ•°ã€æ–°çš„æ—¶é—´
				var msg = []
				if (this.videoTime !== '') {
					msg = this.videoTime.split(':')
				}
				var timeNumber = Number(msg[0]) * 60 + Number(msg[1])
				this.currentPositions = event.changedTouches[0].screenX
				this.percent = this.currentPositions / this.windowWidth
				this.newTime = this.percent * timeNumber
				this.currenttimes = parseInt(this.newTime)
				let theTime = this.newTime
				let middle = 0; // åˆ†
				if (theTime > 60) {
					middle = parseInt(theTime / 60);
					theTime = parseInt(theTime % 60);
				}
				this.changeTime =
					`${Math.round(middle)>9?Math.round(middle):'0'+Math.round(middle)}:${Math.round(theTime)>9?Math.round(theTime):'0'+Math.round(theTime)}`
			},
			playIngs(index) {
				//
			},
			moreVideo(index) {

			},
			toVideo(index) {

			},
			erweima() {

			},
			tozuozhe() {
				this.currents = 1 //ç‚¹å‡»å¤´åƒä»¥åå°±ä¼šåˆ‡æ¢
			},
			stop() {
				// console.log('stop')
			},
			scrolls(event) {
				this.isDragging = event.isDragging
				if (!event.isDragging) { //isDraggingï¼šåˆ¤æ–­ç”¨æˆ·æ˜¯ä¸æ˜¯åœ¨æ»‘åŠ¨ï¼Œæ»‘åŠ¨ï¼štrueï¼Œåœæ­¢æ»‘åŠ¨ï¼šfalseã€‚æˆ‘ä»¬è¦ç”¨æˆ·åœæ­¢æ»‘åŠ¨æ—¶æ‰ç»™ k èµ‹å€¼ï¼Œè¿™æ ·å°±å¯ä»¥é¿å…å¾ˆå¤šéº»çƒ¦
					var i = Math.round(Math.abs(event.contentOffset.y) / (this.wHeight - this.deleteHeight +
						1)) //å…ˆç”¨ç»å¯¹å€¼å–å‡ºæ»‘åŠ¨çš„è·ç¦»ï¼Œç„¶åé™¤ä»¥å±å¹•é«˜åº¦ï¼Œå–ä¸€ä¸ªæ•´ï¼Œå°±çŸ¥é“ä½ ç°åœ¨æ»‘åŠ¨åˆ°å“ªä¸€ä¸ªè§†é¢‘äº†
					if (i !== this.k) { //è¿™é‡ŒåŠ åˆ¤æ–­æ˜¯å› ä¸ºè¿™ä¸ªæ–¹æ³•ä¼šæ‰§è¡Œå¾ˆå¤šæ¬¡ï¼Œä¼šé€ æˆé‡å¤è¯·æ±‚ï¼Œæ‰€ä»¥è¿™é‡Œå†™ä¸€ä¸ªé™åˆ¶
						if (uni.getSystemInfoSync().platform == 'ios') {
							this.k = i //åˆ¤æ–­äº†ç”¨æˆ·æ²¡æœ‰æ»‘åŠ¨ï¼Œç¡®è®¤äº†ç”¨æˆ·çš„ç¡®æ˜¯åœ¨çœ‹è¿™ä¸ªè§†é¢‘ï¼Œç„¶åå°±èµ‹å€¼å•¦
							this.dataList[this.k].state = 'play'
							console.log('æ­£åœ¨æ’­æ”¾ --> ç¬¬' + (this.k + 1) + 'ä¸ªè§†é¢‘ï½')
						} else {
							clearTimeout(this.timers);
							this.timers = setTimeout(() => {
								this.k = i //åˆ¤æ–­äº†ç”¨æˆ·æ²¡æœ‰æ»‘åŠ¨ï¼Œç¡®è®¤äº†ç”¨æˆ·çš„ç¡®æ˜¯åœ¨çœ‹è¿™ä¸ªè§†é¢‘ï¼Œç„¶åå°±èµ‹å€¼å•¦
								this.dataList[this.k].state = 'play'
								console.log('æ­£åœ¨æ’­æ”¾ --> ç¬¬' + (this.k + 1) + 'ä¸ªè§†é¢‘ï½')
							}, 80)
						}
					}
				}
			},
			// æ”¶è—è§†é¢‘
			async handleFavorite(item) {
				let data = {};
				let res = {};
				if (item.is_favorite) {
					data = {
						favorite_ids: item.id,
					}
					res = await api.video_delFavorite(data);
					item.is_favorite = !item.is_favorite
				} else {
					data = {
						video_id: item.id,
					}
					res = await api.video_favoriteStore(data);
					item.is_favorite = !item.is_favorite
				}
				if (res.code == 1) {
					uni.showToast({
						icon: 'none',
						title: res.msg,
						duration: 1500,
					})
					const video = item;
					item.is_favorite ? video.favorite += 1 : video.favorite -= 1;
				}
			},
			get(options) {
				// è¿™ä¸ªæ–¹æ³•ä¸»è¦å°±æ˜¯ç”¨æ¥ç¬¬ä¸€æ¬¡è¿›å…¥è§†é¢‘æ’­æ”¾æ—¶ç”¨æ¥å¤„ç†çš„
				// this.dataList = userList;//è¿™ä¸ªå°±æ˜¯èµ‹å€¼åŠ è½½è§†é¢‘å•¦
				this.dataList = uni.getStorageSync("dataList");
				console.log('66666', this.dataList)
				console.log(options)
				if (Number(options.option) == 0) {
					this.dataList[0].state = "play";
					setTimeout(() => {
						//è¿™é‡Œçš„å»¶è¿Ÿæ˜¯ä¸ºäº†é¿å…æ‰§è¡Œæ—¶é—´å¤ªå¿«è€Œç›´æ¥è·³è¿‡æ‰§è¡Œçš„ bug
						uni.createVideoContext(this.dataList[0]._id+''+0,this).play()
					}, 200)
					this.dataList[0].isplay = false
					setTimeout(() => {
						this.dataList[0].playIng = true
					}, 500)
					var p = 0
					if(this.dataList.length > 1) {
						setTimeout(() => {
							++p
							console.log(this.dataList,p)
							uni.createVideoContext(this.dataList[p]._id + '' + p, this).play()
							setTimeout(() => {
								uni.createVideoContext(this.dataList[p]._id + '' + p, this).pause()
								console.log('é¢„åŠ è½½ç¬¬' + (p + 1) + 'ä¸ªè§†é¢‘ï¼š' + this.dataList[p].id + '' + p)
							}, 2000)
						}, 50)
					}
				} else {
					setTimeout(() => {
						setTimeout(() => {
							this.current = options.option
							this.k = options.option
							setTimeout(() => {
								this.isChange = false
								setTimeout(() => {
									this.dataList[this.k].state = "play";
									uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).play();
								}, 200);
							}, 150);
						}, 5);
					}, 20)
				}
			},
			onpullingdown() {
				// console.log('æ­£åœ¨ä¸‹æ‹‰åˆ·æ–°ï¼Œæ­¤æ—¶æ‰‹è¿˜åœ¨è§¦æ‘¸æ²¡æœ‰æ¾å¼€')
				this.refreshing = true
			},
			onrefresh() {
				// console.log('ä¸‹æ‹‰åˆ·æ–°å®Œæ¯•ï¼Œæ­¤æ—¶æ‰‹æ¾å¼€äº†')
				setTimeout(() => {
					this.refreshing = false
				}, 1000)
			},
			//ç‚¹å‡»æ’­æ”¾&&æš‚åœ
			tapVideoHover(state, event) {
				this.dataList[this.k].isShowimage = false
				this.dataList[this.k].isShowProgressBarTime = false
				this.ProgressBarOpacity = 0.5
				this.dotWidth = 0
				console.log('state--', state);
				if (state == 'play' || state == 'continue') {
					this.dataList[this.k].state = 'pause';
				} else {
					this.dataList[this.k].state = 'continue';
				}
				if (this.dataList[this.k].state == 'continue') {
					uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).play(); //æš‚åœä»¥åç»§ç»­æ’­æ”¾
				}
				if (this.dataList[this.k].state == 'pause') {
					uni.createVideoContext(this.dataList[this.k]._id + '' + this.k, this).pause(); //æš‚åœä»¥åç»§ç»­æ’­æ”¾
				}
			},
			share() {

			},
			// ç‚¹èµï¼Œå–æ¶ˆç‚¹èµ
			async cLike(item) {
				let data = {
					type: 1, //è§†é¢‘ç‚¹èµ
					like_id: item.id,
				};
				let res = {};
				// å–æ¶ˆç‚¹èµ
				// console.log('ddddd',this.videoNewList[this.k].is_like)
				if (item.is_like) {
					res = await api.subVideoLike(data);
					item.is_like = !item.is_like
				} else {
					// ç‚¹èµ
					res = await api.addVideoLike(data);
					item.is_like = !item.is_like
				}
				if (res.code == 1) {
					uni.showToast({
						icon: 'none',
						title: res.msg,
						duration: 1500,
					})
					const video = item;
					item.is_like ? video.like += 1 : video.like -= 1;
				}
				/*
				ç‚¹èµ
				*/
			},
			moveHandle() {},
			closeScrollview() {
				// ç‚¹å‡»è¯„è®ºé‡Œé¢çš„å‰å‰ï¼Œå°±ä¼šå…³é—­è¯„è®º
				this.$refs.pinglun.close();
			},
			handleBack() {
				uni.navigateBack({
					delta: 1,
				})
			}
		}
	}
</script>
<style>
	.container {
		background-color: #000000;
	}

	.video-navbar {
		position: fixed;
		padding-left: 30rpx;
		padding-right: 30rpx;
		display: flex;
		justify-content: space-between;
		z-index: 1;
	}

	.viode-top-icon {
		width: 20px;
		height: 20px;
	}

	.item {
		/* width : 750rpx; */
		background-color: #000000;
		position: relative;
	}

	.videoHover {
		position: absolute;
		top: 0;
		left: 0;
		flex: 1;
		background-color: rgba(0, 0, 0, 0.1);
		justify-content: center;
		align-items: center;

		/* border-style: dashed;
		border-color: #DD524D;
		border-width: 1px; */
	}

	.playState {
		width: 160rpx;
		height: 160rpx;
		opacity: 0.2;
	}

	.userInfo {
		position: absolute;
		bottom: 110px;
		right: 10px;
		flex-direction: column;

	}

	.userAvatar {
		border-radius: 500%;
		margin-bottom: 15px;
		border-style: solid;
		border-width: 2px;
		border-color: #ffffff;
	}

	.userAvatar {
		width: 100rpx;
		height: 100rpx;
	}

	.likeIco,
	.shareIco,
	.commentIco {
		width: 60rpx;
		height: 60rpx;
		margin-top: 15px;
	}

	.likeNum,
	.commentNum,
	.shareTex {
		color: #ffffff;
		font-size: 30rpx;
		text-align: center;
		margin: 5px;
	}

	.likeNumActive {
		color: red;
	}

	.content {
		width: 720rpx;
		z-index: 99;
		position: absolute;
		bottom: 30px;
		/* justify-content: center; */
		padding: 15rpx;
		flex-direction: column;
		justify-content: flex-start;
		color: #ffffff;
	}

	.userName {
		font-size: 30rpx;
		color: #ffffff;
		margin-top: 80upx;
	}

	.words {
		margin-top: 10rpx;
		font-size: 30rpx;
		color: #ffffff;
	}

	.root {
		background-color: #000000;
	}
</style>
